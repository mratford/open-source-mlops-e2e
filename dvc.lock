schema: '2.0'
stages:
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/raw
      hash: md5
      md5: dbe1cfcf546b65bc2246f85aa14c5a21.dir
      size: 466888
      nfiles: 2
    - path: src/stages/data_split.py
      hash: md5
      md5: 25ecfbefcd75d3f52b992160b166b809
      size: 1476
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
          processed_data_dir: data/processed
    outs:
    - path: data/processed
      hash: md5
      md5: 2a8e09441c1d7151864a4a50515854fd.dir
      size: 722295
      nfiles: 4
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 2a8e09441c1d7151864a4a50515854fd.dir
      size: 722295
      nfiles: 4
    - path: src/stages/train.py
      hash: md5
      md5: 95ab2f1fe04a425a6748e94513cd3266
      size: 1825
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 170
            max_depth: 20
    outs:
    - path: models/clf-model.joblib
      hash: md5
      md5: e429a5fcdc9064f98f6de76c89ac2bd9
      size: 19564264
  eval:
    cmd: python src/stages/eval.py --config=params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 2a8e09441c1d7151864a4a50515854fd.dir
      size: 722295
      nfiles: 4
    - path: models/clf-model.joblib
      hash: md5
      md5: e429a5fcdc9064f98f6de76c89ac2bd9
      size: 19564264
    - path: src/stages/eval.py
      hash: md5
      md5: 28d8b795d15875347c0b249a63df95e5
      size: 2350
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
          processed_data_dir: data/processed
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 170
            max_depth: 20
    outs:
    - path: metrics.json
      hash: md5
      md5: 53f9c0d5bc1049872efb2d08d60b92e3
      size: 67
    - path: reports/feat_imp.csv
      hash: md5
      md5: 10b34dc9a0a19279a8c8b2960661dfd9
      size: 185
    - path: reports/figures/cm.png
      hash: md5
      md5: bd4ac50b85d76e7d0fd467c55d6bba2d
      size: 10345
